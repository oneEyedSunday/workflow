<div class="my-5">
  <div class="card mx-auto" style="max-width: 500px">
    <div class="card-header">
      {{ editing ? 'Update '.concat(document?.name) : 'Create Document' }}
    </div>
    <div class="card-body">
      <form *ngIf="document else loading" #documentForm="ngForm" (ngSubmit)="onSubmit()">
          <div class="form-group">
            <label for="inputEmail3" class="col-sm-2 col-form-label">Name</label>
            <div class="col-sm-10">
              <input type="email" class="form-control" name="name"
              [(ngModel)]="document.name" placeholder="Document Name">
            </div>
          </div>
          <div class="form-group">
            <label for="exampleFormControlFile1" class="col-sm-4 col-form-label">Upload Document</label>
            <div class="col-sm-8">
                <input type="file" class="form-control-file" ng2FileSelect [uploader]="uploader"
                 name="file">
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-4">
                <button class="btn btn-primary" [disabled]="submitting">
                  <span class="fa fa-spin fa-spinner" *ngIf="submitting"></span>
                  Save
                </button>
            </div>
          </div>
      </form>
      <div class="file" *ngFor="let response of responses; let i = index">
        <h3>{{response.file.name}}</h3>
        <div class="status">
          Uploading... {{response.progress}}%
          <div *ngIf="!response.status">In progress</div>
          <div class="status-code" *ngIf="response.status">Upload completed with status code {{response.status}}</div>
        </div>
        <div class="progress-bar">
          <div class="progress" role="progressbar" [style.width.%]="response.progress"></div>
        </div>
        <div class="form_line">
          <div class="form_controls">
            <div class="preview">
              <!-- Consider using https://github.com/valor-software/ng2-file-upload/issues/461 for image preview -->
            </div>
          </div>
        </div>
        <div class="info">
          <table>
            <tr *ngFor="let property of getFileProperties(response.data)">
              <td> {{ property.key }} </td>
              <td> {{ property.value | json}} </td>
            </tr>
          </table>
        </div>
      </div>
  
    </div>
  </div>
  <ng-template #loading>
    <div class="screen--mask">
      <app-loader [size]="5"></app-loader>
    </div>
  </ng-template>
  
</div>